<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Imoveis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        body {
            font-family: helvetica-w01-roman, helvetica-w02-roman, helvetica-lt-w10-roman, sans-serif;
            margin-bottom: 50px;
            display: flex;
            margin-left: 20px;
            align-items: left;
        }

        .title {
            text-align: center;
        }

        .final-button {
            margin-top: 60px;
            text-align: center;
        }

        /*.final-button:hover {
            background-color: #ffffff;
        }*/
    </style>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</head>

<body>

    <div class="container p-5">
        <form class="row g-3">

            <div class="mb-3 col-md-12">
                <div class="mb-3 col-md-4" id="cep_display">
                    <label for="text" class="form-label">CEP *</label>
                    <input type="cep" id="cep" class="form-control border border-black rounded-0"
                        placeholder="00001-000" required>
                </div>

                <div class="mb-3 col-md-2">
                    <div class="form-check">
                        <input type="checkbox" id="naoseicep" class="form-check-input border border-black">
                        <label for="text" class="form-text-label">Não sei o CEP</label>
                    </div>
                </div>
            </div>

            <div class="row" style="display: none;" id="endereco_completo">
                <div class="col-md-4">
                    <label for="text" class="form-text-label mb-2">Estado *</label>
                    <select class="form-select border border-black rounded-0" aria-label="Default select example"
                        id="estado">
                        <option selected></option>
                        <option value="ac">AC</option>
                        <option value="al">AL</option>
                        <option value="ap">AP</option>
                        <option value="am">AM</option>
                        <option value="ba">BA</option>
                        <option value="ce">CE</option>
                        <option value="df">DF</option>
                        <option value="es">ES</option>
                        <option value="go">GO</option>
                        <option value="ma">MA</option>
                        <option value="mt">MT</option>
                        <option value="ms">MS</option>
                        <option value="mg">MG</option>
                        <option value="pa">PA</option>
                        <option value="pb">PB</option>
                        <option value="pr">PR</option>
                        <option value="pe">PE</option>
                        <option value="pi">PI</option>
                        <option value="rj">RJ</option>
                        <option value="rn">RN</option>
                        <option value="rs">RS</option>
                        <option value="ro">RO</option>
                        <option value="rr">RR</option>
                        <option value="sc">SC</option>
                        <option value="sp">SP</option>
                        <option value="se">SE</option>
                        <option value="to">TO</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="text" class="form-label">Cidade *</label>
                    <input type="cidade" id="cidade" class="form-control border border-black rounded-0">
                </div>
                <div class="col-md-4">
                    <label for="text" class="form-label">Bairro *</label>
                    <input type="bairro" id="bairro" class="form-control border border-black rounded-0" required>
                </div>
                <div class="col-md-4">
                    <label for="text" class="form-label mt-3">Logradouro *</label>
                    <input type="logradouro" id="logradouro" class="form-control border border-black rounded-0"
                        required>
                </div>
                <div class="col-md-4">
                    <label for="text" class="form-label mt-3">Número *</label>
                    <input type="numero" id="numero" class="form-control border border-black rounded-0" required>
                </div>
            </div>

            <div class="col-md-6 ">
                <div class="mb-3 ">
                    <label class="mb-3" id="label_tipo_imovel">Tipo de Imóvel *</label>

                    <div class="form-check">
                        <input class="form-check-input border border-black tipoimovel" type="radio" name="tipoDeImovel"
                            id="tipoimovel" value="apartamento">
                        <label class="form-check-label" for="tipo1.1">Apartamento</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input border border-black tipoimovel" type="radio" name="tipoDeImovel"
                            id="tipoimovel" value="casa">
                        <label class="form-check-label" for="casa">Casa</label>
                    </div>

                </div>
            </div>

            <div class="col-md-6">
                <div class="mb-3">
                    <label class="mb-3" id="label_tipo_transc">Tipo de Transação *</label>

                    <div class="form-check">
                        <input class="form-check-input border border-black tipotransacao" type="radio" name="tipoDeTransacao"
                            id="" value="venda" required>
                        <label class="form-check-label" for="tipo1.1">Venda</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input border border-black tipotransacao" type="radio" name="tipoDeTransacao"
                            id="" value="locacao" required>
                        <label class="form-check-label" for="casa">Locação</label>
                    </div>

                </div>
            </div>

            <div class="col-md-6">
                <label for="areautil" class="form-label">Área útil *</label>
                <input type="text" class="form-control required border border-black rounded-0" id="areautil" required>
            </div>

            <div class="col-md-6">
                <label for="anoconstrucao" class="form-label">Ano de contrução *</label>
                <input type="text" class="form-control border border-black rounded-0" id="anocontrucao" required>
            </div>

            <div class="col-md-6">
                <label for="dormitorio" class="form-label">Dormitórios *</label>
                <input type="text" class="form-control border border-black rounded-0" id="dormitorio">
            </div>

            <div class="col-md-6">
                <label for="suites" class="form-label">Suites *</label>
                <input type="text" class="form-control border border-black rounded-0" id="suites">
            </div>

            <div class="col-md-6">
                <label for="banheiros" class="form-label">Banheiros *</label>
                <input type="text" class="form-control border border-black rounded-0" id="banheiros">
            </div>

            <div class="col-md-6">
                <label for="vagas" class="form-label">Vagas *</label>
                <input type="text" class="form-control border border-black rounded-0" id="vagas">
            </div>

            <div class="final-button d-grid gap-2 col-6 mx-auto">
                <button type="button" class="btn btn-secondary rounded-0" onclick="enviar()">Enviar</button>
            </div>

        </form>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let cepInput = document.getElementById('cep');
            let areaUtil = document.getElementById('areautil');
            let anoConstrucao = document.getElementById('anocontrucao');
            let dormitorios = document.getElementById('dormitorio');
            let suites = document.getElementById('suites');
            let banheiros = document.getElementById('banheiros');
            let vagas = document.getElementById('vagas');

            cepInput.addEventListener('input', function (event) {
                let value = event.target.value;
                // Remove caracteres não numéricos, incluindo letras
                value = value.replace(/\D/g, '');
                // Insere o hífen após o quinto dígito
                if (value.length > 5 && !/\-/g.test(value)) {
                    value = value.slice(0, 5) + '-' + value.slice(5);
                } else if (value.length === 5 && /\//g.test(value)) {
                    value = value.replace(/\//g, '-'); // Corrige caso tenha sido inserido um slash em vez de um hífen
                }
                // Limita a entrada a 8 dígitos após o hífen
                if (value.length > 9) {
                    value = value.slice(0, 8);
                }
                event.target.value = value;
            });

            areaUtil.addEventListener('input', function (event) {
                const newValue = areaUtil.value.replace(/[^0-9.]/g, '');
                areaUtil.value = newValue;
            })

            anoConstrucao.addEventListener('input', function (event) {
                const newValue = anoConstrucao.value.replace(/[^0-9]/g, '');
                anoConstrucao.value = newValue;
            })

            dormitorios.addEventListener('input', function (event) {
                const newValue = dormitorios.value.replace(/[^0-9]/g, '');
                dormitorios.value = newValue;
            })

            suites.addEventListener('input', function (event) {
                const newValue = suites.value.replace(/[^0-9]/g, '');
                suites.value = newValue;
            })

            banheiros.addEventListener('input', function (event) {
                const newValue = banheiros.value.replace(/[^0-9]/g, '');
                banheiros.value = newValue;
            })

            vagas.addEventListener('input', function (event) {
                const newValue = vagas.value.replace(/[^0-9]/g, '');
                vagas.value = newValue;
            })

            document.getElementById("naoseicep").addEventListener('change', () => {
                if (document.getElementById("naoseicep").checked) {
                    document.getElementById("endereco_completo").style.display = "flex"
                    document.getElementById("cep_display").style.display = "none"
                } else {
                    document.getElementById("endereco_completo").style.display = "none"
                    document.getElementById("cep_display").style.display = "block"
                }
            })


        });

        function enviar() {
            document.getElementById("cep").className = "form-control border border-black rounded-0"
            document.getElementById("estado").className = "form-select border rounded-0 border-black"
            document.getElementById("cidade").className = "form-control border border-black rounded-0"
            document.getElementById("bairro").className = "form-control border border-black rounded-0"
            document.getElementById("logradouro").className = "form-control border border-black rounded-0"
            document.getElementById("numero").className = "form-control border border-black rounded-0"
            document.getElementById('label_tipo_imovel').className = "mb-3 text-black"
            document.getElementById('label_tipo_transc').className = "mb-3 text-black"
            document.getElementById("areautil").className = "form-control required border rounded-0 border-black"
            document.getElementById("anocontrucao").className = "form-control required border rounded-0 border-black"
            document.getElementById("dormitorio").className = "form-control required border rounded-0 border-black"
            document.getElementById("suites").className = "form-control required border rounded-0 border-black"
            document.getElementById("banheiros").className = "form-control required border rounded-0 border-black"
            document.getElementById("vagas").className = "form-control required border rounded-0 border-black"

            let cep = document.getElementById("cep").value;
            let naosei = document.getElementById("naoseicep").checked;
            let estado = document.getElementById("estado").value;
            let cidade = document.getElementById("cidade").value;
            let bairro = document.getElementById("bairro").value;
            let logradouro = document.getElementById("logradouro").value;
            let numero = document.getElementById("numero").value;
            let tipoimovel = document.querySelectorAll(".tipoimovel");
            let tipotransacao = document.querySelectorAll(".tipotransacao");
            let areautil = document.getElementById("areautil").value;
            let anoconstrucao = document.getElementById("anocontrucao").value;
            let dormitorio = document.getElementById("dormitorio").value;
            let suites = document.getElementById("suites").value;
            let banheiros = document.getElementById("banheiros").value;
            let vagas = document.getElementById("vagas").value;

            if (naosei) {
                if (estado.length == 0) {
                    document.getElementById("estado").className = "form-select border rounded-0 border-danger"
                    return;
                }

                if (cidade.length == 0) {
                    document.getElementById("cidade").className = "form-control border border-danger rounded-0"
                    return;
                }

                if (bairro.length == 0) {
                    document.getElementById("bairro").className = "form-control border border-danger rounded-0"
                    return;
                }

                if (logradouro.length == 0) {
                    document.getElementById("logradouro").className = "form-control border border-danger rounded-0"
                    return;
                }

                if (numero.length == 0) {
                    document.getElementById("numero").className = "form-control border border-danger rounded-0"
                    return;
                }
            }

            if (!naosei && cep.length == 0) {
                document.getElementById("cep").className = "form-control border border-danger rounded-0"
                return;
            }

            if (!tipoimovel[0].checked && !tipoimovel[1].checked) {
                document.getElementById('label_tipo_imovel').className = "mb-3 text-danger"
                return
            }

            if (!tipotransacao[0].checked && !tipotransacao[1].checked) {
                document.getElementById('label_tipo_transc').className = "mb-3 text-danger"
                return
            }

            if (areautil.length == 0) {
                document.getElementById("areautil").className = "form-control required border rounded-0 border-danger"
                return;
            }

            if (anocontrucao.length == 0) {
                document.getElementById("anocontrucao").className = "form-control required border rounded-0 border-danger"
                return;
            }

            if (dormitorio.length == 0) {
                document.getElementById("dormitorio").className = "form-control required border rounded-0 border-danger"
                return;
            }

            if (suites.length == 0) {
                document.getElementById("suites").className = "form-control required border rounded-0 border-danger"
                return;
            }

            if (banheiros.length == 0) {
                document.getElementById("banheiros").className = "form-control required border rounded-0 border-danger"
                return;
            }

            if (vagas.length == 0) {
                document.getElementById("vagas").className = "form-control required border rounded-0 border-danger"
                return;
            }

            let tipoImovelValue = document.querySelectorAll(".tipoimovel")[0].checked ? "APARTAMENTO" : "CASA";
            let tipotransacaoValue = document.querySelectorAll(".tipotransacao")[0].checked ? "VENDA" : "LOCACAO"

            const obj = {
                cep : cep,
                estado: estado.toUpperCase(),
                cidade: cidade,
                bairro: bairro,
                logradouro : logradouro,
                numero: parseInt(numero),
                tipoimovel : tipoImovelValue,
                tipotransacao: tipotransacaoValue,
                areautil: parseFloat(areautil),
                anoconstrucao: parseInt(anoconstrucao),
                dormitorio: parseInt(dormitorio),
                suites: parseInt(suites),
                banheiros: parseInt(banheiros),
                vagas: parseInt(vagas)
            }

            
        }
    </script>

</body>

</html>
